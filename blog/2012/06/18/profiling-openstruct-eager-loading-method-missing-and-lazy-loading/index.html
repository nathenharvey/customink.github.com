
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Profiling OpenStruct, Eager Loading, Method Missing, and Lazy Loading - EngineerInk</title>
  <meta name="author" content="CustomInk">

  
  <meta name="description" content="I was recently working on a gem that involved marshaling data from a remote API. I really wanted the gem to behave like a native Ruby object, but &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://technology.customink.com/blog/2012/06/18/profiling-openstruct-eager-loading-method-missing-and-lazy-loading">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="EngineerInk" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<script type="text/javascript" src="http://use.typekit.com/qsb1gwk.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-32456448-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Engineer<span id="tail">Ink</span></a></h1>
  
    <h2>A CustomInk Technology Blog</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:technology.customink.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/our-team">Our Team</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      

<div>
  <article class="hentry" role="article">
    
  <header>
    
      <h1 class="entry-title">Profiling OpenStruct, Eager Loading, Method Missing, and Lazy Loading</h1>
    
    
      <p class="meta">
        Posted on 








  



<time datetime="2012-06-18T21:32:00-04:00" pubdate data-updated="true">Jun 18<span>th</span>, 2012</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>I was recently working on a gem that involved marshaling data from a remote API. I really wanted the gem to behave like a native Ruby object, but they methods would vary depending on the response. Since the data was dynamic, it would have been counter-productive and not scalable to define each of the methods individually.</p>

<p>As such, I thought of a few different ways to get the result I wanted, but that just raised more questions, mainly <strong>performance</strong>. How would each of these methods perform? This was especially important given the large number of queries I would be making. In this blog post, I detail the exploration of these different methods and arrive at some pretty cool conclusions.</p>

<!-- more -->


<h2>The Scenario</h2>

<p>In this scenario, we will be using the result of a <a href="https://api.github.com/users/sethvargo/repos">Github API call to my profile</a>. The hash (as follows) will be stored and referenced in the <code>@store</code> variable:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="s1">&#39;has_wiki&#39;</span> <span class="o">=&gt;</span> <span class="kp">false</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;has_issues&#39;</span> <span class="o">=&gt;</span> <span class="kp">false</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;forks&#39;</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;open_issues&#39;</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;language&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Ruby&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;A distributed build system for the open source community.&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;svn_url&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;https://github.com/sethvargo/travis-ci&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;pushed_at&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;2012-06-16T17:32:35Z&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;full_name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;sethvargo/travis-ci&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;git_url&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;git://github.com/sethvargo/travis-ci.git&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;created_at&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;2012-06-16T17:00:29Z&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;url&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;https://api.github.com/repos/sethvargo/travis-ci&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;has_downloads&#39;</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;watchers&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;size&#39;</span> <span class="o">=&gt;</span> <span class="mi">188</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;homepage&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;http://travis-ci.org&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;clone_url&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;https://github.com/sethvargo/travis-ci.git&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;ssh_url&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;git@github.com:sethvargo/travis-ci.git&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;html_url&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;https://github.com/sethvargo/travis-ci&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;updated_at&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;2012-06-16T17:32:35Z&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="s1">&#39;owner&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class='line'>    <span class="s1">&#39;avatar_url&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;https://secure.gravatar.com/avatar/87f282c6c2cdad13100dffe8c1daf77d?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;login&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;sethvargo&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;gravatar_id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;87f282c6c2cdad13100dffe8c1daf77d&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;url&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;https://api.github.com/users/sethvargo&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="mi">408570</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;travis-ci&#39;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>The Metrics</h3>

<p>Because of the nature of my curiosity, we will measure on three different metrics:</p>

<ul>
<li>creating the object</li>
<li>initial request time</li>
<li>average request time for requests (2-100)</li>
</ul>


<h3>Pure Hash</h3>

<p>The Pure Hash is our baseline. This is without any magic. We are just using the straight-forward bracket-notation for accessing a value in the hash:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="vi">@store</span><span class="o">[</span><span class="n">key</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<h3>OpenStruct</h3>

<p>The <a href="http://ruby-doc.org/stdlib-1.9.3/libdoc/ostruct/rdoc/OpenStruct.html">OpenStruct</a> is a Ruby library that allows builds methods from a given hash.</p>

<p><code>OpenStruct</code> certainly has advantages, being only two lines of code. It also returns <code>nil</code> instead of raising an exception when calling a &#8220;method&#8221; that doesn&#8217;t exist.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s1">&#39;ostruct&#39;</span>
</span><span class='line'><span class="k">class</span> <span class="nc">FiddleOpenStruct</span> <span class="o">&lt;</span> <span class="no">OpenStruct</span><span class="p">;</span> <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Eager Loading</h3>

<p>With Eager Loading, we parse the data on initial object creation and define methods for each of the objects in the hash. This is obviously expensive on the object creation, but should be faster for subsequent calls.</p>

<p>Eager Loading will raise an exception when calling a method that does not exist, although this could be overridden with <code>method_missing</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">FiddleEagerLoading</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">hash</span><span class="p">)</span>
</span><span class='line'>    <span class="nb">hash</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">key</span><span class="p">,</span><span class="n">value</span><span class="o">|</span>
</span><span class='line'>      <span class="n">define_singleton_method</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">to_s</span><span class="p">){</span> <span class="nb">hash</span><span class="o">[</span><span class="n">key</span><span class="o">]</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>method_missing</h3>

<p>Using <code>method_missing</code>, we &#8220;proxy&#8221; the requests to their associated keys in the hash store. The biggest problem with <code>method_missing</code> is performance, and that fact is very well-documented. Every call must go through the entire object stack before it hits <code>method_missing</code>, so we can except this method to not perform well.</p>

<p>With <code>method_missing</code>, we can either call <code>super</code> (raise an exception) or end with <code>nil</code> and any non-existent methods will return <code>nil</code>, just like <code>OpenStruct</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">FiddleMethodMissing</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">hash</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@hash</span> <span class="o">=</span> <span class="nb">hash</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">method_missing</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@hash</span><span class="o">[</span><span class="n">m</span><span class="o">.</span><span class="n">to_s</span><span class="o">].</span><span class="n">nil?</span> <span class="p">?</span> <span class="k">super</span> <span class="p">:</span> <span class="vi">@hash</span><span class="o">[</span><span class="n">m</span><span class="o">.</span><span class="n">to_s</span><span class="o">]</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Lazy Loading</h3>

<p>A hybrid of <code>Eager Loading</code> and <code>method_missing</code>, in Lazy Loading, we dynamically create methods as they are requested in <code>method_missing</code>. On an initial request, no methods exist, so we hit <code>method_missing</code>. However, <code>method_missing</code> defines a method. On a subsequent call, we don&#8217;t execute the entire stack and call the newly created method (meta-programming for the win)!</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">FiddleLazyLoading</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">hash</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@hash</span> <span class="o">=</span> <span class="nb">hash</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">method_missing</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
</span><span class='line'>    <span class="k">unless</span> <span class="vi">@hash</span><span class="o">[</span><span class="n">m</span><span class="o">.</span><span class="n">to_s</span><span class="o">].</span><span class="n">nil?</span>
</span><span class='line'>      <span class="n">value</span> <span class="o">=</span> <span class="vi">@hash</span><span class="o">[</span><span class="n">m</span><span class="o">.</span><span class="n">to_s</span><span class="o">]</span>
</span><span class='line'>      <span class="n">define_singleton_method</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">to_s</span><span class="p">){</span> <span class="n">value</span> <span class="p">}</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">value</span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>      <span class="k">super</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h2>The Test Suite</h2>

<p>This test suite is very simplistic, coming in under 50 lines of code. You can see we are testing the three different metrics with appropriate <code>puts</code> statements to differentiate the output:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="vi">@methods</span> <span class="o">=</span> <span class="vi">@store</span><span class="o">.</span><span class="n">keys</span>
</span><span class='line'><span class="vi">@n</span> <span class="o">=</span> <span class="mi">10000</span>
</span><span class='line'>
</span><span class='line'><span class="nb">puts</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span class='line'><span class="nb">puts</span> <span class="s1">&#39;Creating the Object&#39;</span>
</span><span class='line'><span class="no">Benchmark</span><span class="o">.</span><span class="n">bm</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span>
</span><span class='line'>  <span class="n">x</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s1">&#39;pure hash:&#39;</span><span class="p">)</span>      <span class="p">{</span> <span class="vi">@n</span><span class="o">.</span><span class="n">times</span><span class="p">{</span> <span class="vi">@store</span> <span class="p">}</span> <span class="p">}</span>
</span><span class='line'>  <span class="n">x</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s1">&#39;open struct:&#39;</span><span class="p">)</span>    <span class="p">{</span> <span class="vi">@n</span><span class="o">.</span><span class="n">times</span><span class="p">{</span> <span class="no">FiddleOpenStruct</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="vi">@store</span><span class="p">)</span> <span class="p">}</span> <span class="p">}</span>
</span><span class='line'>  <span class="n">x</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s1">&#39;eager loading:&#39;</span><span class="p">)</span>  <span class="p">{</span> <span class="vi">@n</span><span class="o">.</span><span class="n">times</span><span class="p">{</span> <span class="no">FiddleEagerLoading</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="vi">@store</span><span class="p">)</span> <span class="p">}</span> <span class="p">}</span>
</span><span class='line'>  <span class="n">x</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s1">&#39;method_missing:&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="vi">@n</span><span class="o">.</span><span class="n">times</span><span class="p">{</span> <span class="no">FiddleMethodMissing</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="vi">@store</span><span class="p">)</span> <span class="p">}</span> <span class="p">}</span>
</span><span class='line'>  <span class="n">x</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s1">&#39;lazy loading:&#39;</span><span class="p">)</span>   <span class="p">{</span> <span class="vi">@n</span><span class="o">.</span><span class="n">times</span><span class="p">{</span> <span class="no">FiddleLazyLoading</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="vi">@store</span><span class="p">)</span> <span class="p">}</span> <span class="p">}</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="nb">puts</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span class='line'><span class="nb">puts</span> <span class="s1">&#39;First method call&#39;</span>
</span><span class='line'><span class="no">Benchmark</span><span class="o">.</span><span class="n">bm</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span>
</span><span class='line'>  <span class="n">x</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s1">&#39;pure hash:&#39;</span><span class="p">)</span>      <span class="p">{</span> <span class="vi">@n</span><span class="o">.</span><span class="n">times</span><span class="p">{</span> <span class="vi">@methods</span><span class="o">.</span><span class="n">each</span><span class="p">{</span><span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="vi">@store</span><span class="o">[</span><span class="n">m</span><span class="o">]</span> <span class="p">}</span> <span class="p">}</span> <span class="p">}</span>
</span><span class='line'>  <span class="n">x</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s1">&#39;open struct:&#39;</span><span class="p">)</span>    <span class="p">{</span> <span class="vi">@n</span><span class="o">.</span><span class="n">times</span><span class="p">{</span> <span class="vi">@methods</span><span class="o">.</span><span class="n">each</span><span class="p">{</span><span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="no">FiddleOpenStruct</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="vi">@store</span><span class="p">)</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">to_sym</span><span class="p">)</span> <span class="p">}</span> <span class="p">}</span> <span class="p">}</span>
</span><span class='line'>  <span class="n">x</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s1">&#39;eager loading:&#39;</span><span class="p">)</span>  <span class="p">{</span> <span class="vi">@n</span><span class="o">.</span><span class="n">times</span><span class="p">{</span> <span class="vi">@methods</span><span class="o">.</span><span class="n">each</span><span class="p">{</span><span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="no">FiddleEagerLoading</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="vi">@store</span><span class="p">)</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">to_sym</span><span class="p">)</span> <span class="p">}</span> <span class="p">}</span> <span class="p">}</span>
</span><span class='line'>  <span class="n">x</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s1">&#39;method_missing:&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="vi">@n</span><span class="o">.</span><span class="n">times</span><span class="p">{</span> <span class="vi">@methods</span><span class="o">.</span><span class="n">each</span><span class="p">{</span><span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="no">FiddleMethodMissing</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="vi">@store</span><span class="p">)</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">to_sym</span><span class="p">)</span> <span class="p">}</span> <span class="p">}</span> <span class="p">}</span>
</span><span class='line'>  <span class="n">x</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s1">&#39;lazy loading:&#39;</span><span class="p">)</span>   <span class="p">{</span> <span class="vi">@n</span><span class="o">.</span><span class="n">times</span><span class="p">{</span> <span class="vi">@methods</span><span class="o">.</span><span class="n">each</span><span class="p">{</span><span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="no">FiddleLazyLoading</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="vi">@store</span><span class="p">)</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">to_sym</span><span class="p">)</span> <span class="p">}</span> <span class="p">}</span> <span class="p">}</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="nb">puts</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span class='line'><span class="nb">puts</span> <span class="s2">&quot;[2..</span><span class="si">#{</span><span class="vi">@n</span><span class="si">}</span><span class="s2">] times&quot;</span>
</span><span class='line'><span class="vi">@fiddle_open_struct</span> <span class="o">=</span> <span class="no">FiddleOpenStruct</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="vi">@store</span><span class="p">)</span>
</span><span class='line'><span class="vi">@fiddle_eager_loading</span> <span class="o">=</span> <span class="no">FiddleEagerLoading</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="vi">@store</span><span class="p">)</span>
</span><span class='line'><span class="vi">@fiddle_method_missing</span> <span class="o">=</span> <span class="no">FiddleMethodMissing</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="vi">@store</span><span class="p">)</span>
</span><span class='line'><span class="vi">@fiddle_lazy_loading</span> <span class="o">=</span> <span class="no">FiddleLazyLoading</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="vi">@store</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="vi">@methods</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span>
</span><span class='line'>  <span class="vi">@store</span><span class="o">[</span><span class="n">m</span><span class="o">]</span>
</span><span class='line'>  <span class="vi">@fiddle_open_struct</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">to_sym</span><span class="p">)</span>
</span><span class='line'>  <span class="vi">@fiddle_eager_loading</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">to_sym</span><span class="p">)</span>
</span><span class='line'>  <span class="vi">@fiddle_method_missing</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">to_sym</span><span class="p">)</span>
</span><span class='line'>  <span class="vi">@fiddle_lazy_loading</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">to_sym</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="no">Benchmark</span><span class="o">.</span><span class="n">bm</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span>
</span><span class='line'>  <span class="n">x</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s1">&#39;pure hash:&#39;</span><span class="p">)</span>      <span class="p">{</span> <span class="vi">@n</span><span class="o">.</span><span class="n">times</span><span class="p">{</span> <span class="vi">@methods</span><span class="o">.</span><span class="n">each</span><span class="p">{</span><span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="vi">@store</span><span class="o">[</span><span class="n">m</span><span class="o">]</span> <span class="p">}</span> <span class="p">}</span> <span class="p">}</span>
</span><span class='line'>  <span class="n">x</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s1">&#39;open struct:&#39;</span><span class="p">)</span>    <span class="p">{</span> <span class="vi">@n</span><span class="o">.</span><span class="n">times</span><span class="p">{</span> <span class="vi">@methods</span><span class="o">.</span><span class="n">each</span><span class="p">{</span><span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="vi">@fiddle_open_struct</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">to_sym</span><span class="p">)</span> <span class="p">}</span> <span class="p">}</span> <span class="p">}</span>
</span><span class='line'>  <span class="n">x</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s1">&#39;eager loading:&#39;</span><span class="p">)</span>  <span class="p">{</span> <span class="vi">@n</span><span class="o">.</span><span class="n">times</span><span class="p">{</span> <span class="vi">@methods</span><span class="o">.</span><span class="n">each</span><span class="p">{</span><span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="vi">@fiddle_eager_loading</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">to_sym</span><span class="p">)</span> <span class="p">}</span> <span class="p">}</span> <span class="p">}</span>
</span><span class='line'>  <span class="n">x</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s1">&#39;method_missing:&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="vi">@n</span><span class="o">.</span><span class="n">times</span><span class="p">{</span> <span class="vi">@methods</span><span class="o">.</span><span class="n">each</span><span class="p">{</span><span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="vi">@fiddle_method_missing</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">to_sym</span><span class="p">)</span> <span class="p">}</span> <span class="p">}</span> <span class="p">}</span>
</span><span class='line'>  <span class="n">x</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s1">&#39;lazy loading:&#39;</span><span class="p">)</span>   <span class="p">{</span> <span class="vi">@n</span><span class="o">.</span><span class="n">times</span><span class="p">{</span> <span class="vi">@methods</span><span class="o">.</span><span class="n">each</span><span class="p">{</span><span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="vi">@fiddle_lazy_loading</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">to_sym</span><span class="p">)</span> <span class="p">}</span> <span class="p">}</span> <span class="p">}</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Results</h2>

<p>And the moment you have been waiting for - the results:</p>

<pre><code>Creating the Object
                      user     system      total        real
pure hash:        0.000000   0.000000   0.000000 (  0.000515)
open struct:      1.440000   0.000000   1.440000 (  1.440354)
eager loading:    0.470000   0.000000   0.470000 (  0.468859)
method_missing:   0.000000   0.000000   0.000000 (  0.003673)
lazy loading:     0.000000   0.000000   0.000000 (  0.002815)


First method call
                      user     system      total        real
pure hash:        0.030000   0.000000   0.030000 (  0.021060)
open struct:     32.720000   0.010000  32.730000 ( 32.740407)
eager loading:   10.470000   0.030000  10.500000 ( 10.496159)
method_missing:   0.270000   0.000000   0.270000 (  0.261547)
lazy loading:     0.970000   0.000000   0.970000 (  0.976031)


[2..10000] times
                      user     system      total        real
pure hash:        0.020000   0.000000   0.020000 (  0.021658)
open struct:      0.080000   0.000000   0.080000 (  0.077467)
eager loading:    0.080000   0.000000   0.080000 (  0.081599)
method_missing:   0.190000   0.000000   0.190000 (  0.191151)
lazy loading:     0.080000   0.000000   0.080000 (  0.071562)
</code></pre>

<p>As expected, the pure hash (base) out-performed all other methods. In creating the initial object, the <code>OpenStruct</code> performed very poorly at over a second. Furthermore, as you might expect, eager loading took about half a second. The rest of the methods had negligible results. On the first method call, the <code>OpenStruct</code> took over 30 seconds, and eager loading took about 10 seconds. We also see that lazy loading began pulling ahead of <code>method_missing</code>. Finally, in subsequent requests (after initial object creation and first method call), <code>method_missing</code> performed the poorest.</p>

<p>Here are some observations to help you visualize the results:</p>

<h3>Creating Initial Object</h3>

<pre><code>                       0        10       100      1000     10000
pure hash       0.000007  0.000003  0.000008  0.000052  0.000514
open struct     0.000002  0.001660  0.014470  0.147943  1.507701
eager loading   0.000002  0.000406  0.004800  0.046868  0.482254
method_missing  0.000003  0.000007  0.000029  0.000269  0.003883
lazy loading    0.000002  0.000007  0.000029  0.000535  0.002656
</code></pre>

<div id="chart_creating_initial_object" style="width:100%; height:500px; min-width:600px;"></div>


<br />


<p>Clearly the <code>OpenStruct</code> took a significant amount of time, measuring over 4x its closest competitor. Ignoring the <code>OpenStruct</code> outlier, eager loading, as expected, took longer than all other methods. This is because it generates all those methods on each object creation. Comparing the other results, we can conclude the following:</p>

<ul>
<li><strong>Don&#8217;t use OpenStruct</strong></li>
<li><strong>If you are creating a lot of objects, avoid Eager Loading (for now)</strong></li>
</ul>


<h3>First Method Call</h3>

<pre><code>                       0        10       100      1000      10000
pure hash       0.000008  0.000026  0.000236  0.002248  0.0210930
open struct     0.000002  0.032629  0.328859  3.340419  33.446652
eager loading   0.000003  0.011754  0.103952  1.072228  10.856142
method_missing  0.000002  0.000329  0.003961  0.027261  0.2574720
lazy loading    0.000002  0.000968  0.009337  0.100895  1.0136820
</code></pre>

<div id="chart_first_method_call" style="width:100%; height:500px; min-width:600px;"></div>


<br />


<p>Again we see that <code>OpenStruct</code> performs poorly, taking over 30 seconds to process 10,000 first method calls. <code>method_missing</code> surprisingly performed very well. Lazy loading doesn&#8217;t have a chance to shine here because we are only calling the method once (thus essentially using <code>method_missing</code>). The extra time is from actually defining the method. With this data, we can conclude the following:</p>

<ul>
<li><strong>Don&#8217;t use OpenStruct</strong></li>
<li><strong><code>method_missing</code> wins when only calling a few methods</strong></li>
</ul>


<h3>Subsequent Method Calls</h3>

<pre><code>                       0        10       100      1000     10000    100000    1000000    10000000
pure hash       0.000008  0.000027  0.000229  0.002292  0.021919  0.210670  2.1555960   21.669286
open struct     0.000003  0.000090  0.000825  0.008313  0.078974  0.781603  7.9774830   76.648551
eager loading   0.000002  0.000093  0.000878  0.008558  0.084123  0.839965  8.5130510   80.623932
method_missing  0.000002  0.000217  0.001972  0.020136  0.186405  1.916927  19.288969  188.095461
lazy loading    0.000002  0.000081  0.000754  0.007333  0.072564  0.737112  7.4007320   72.202056
</code></pre>

<div id="subsequent_method_calls" style="width:100%; height:500px; min-width:600px;"></div>


<br />


<p>In drawing conclusions from this data, it&#8217;s more important to look at <em>how</em> the data is scaling, rather than the factors themselves. In the long run, lazy loading performed the best, but OpenStruct is a close second. It turns out OpenStruct isn&#8217;t that bad when making a lot of queries. <code>method_missing</code> performed very poorly.</p>

<h2>Final Conclusions</h2>

<p>Each of the methods we analyzed provide different benefits under different circumstances. It&#8217;s impossible to say &#8220;use method x, because it&#8217;s better&#8221;. One of the reasons I chose to analyze multiple use cases is because it illustrates the fact that there is no &#8220;silver bullet&#8221; answer to this common problem.</p>

<p>If you&#8217;re in <code>irb</code> and need to marshall a hash into an object, <code>OpenStruct</code> is the easiest and fastest route. Similarly, if you are creating an object that receives thousands of requests, you may want to implement lazy loading. There is not easy answer, but hopefully these statistics and benchmarks help in your next project.</p>

<h2>Known Caveats</h2>

<p>These methods are purely for example and fails many edge cases.</p>

<ol>
<li>These methods require special cases when your object returns data that is actually <code>nil</code> or <code>null</code>. It could raise an exception instead of actually returning <code>nil</code> as expected.</li>
<li>Allowing methods to by dynamically called opens you up to a world of hurt - especially if your data&#8217;s keys correspond to existing Ruby methods. As an example, when writing this blog post, my original hash had a key named <code>fork</code>. When I was actually sending <code>fork</code>, it was calling the Ruby <code>Kernel.fork</code> method, which really threw me for a loop.</li>
<li>I neglected many qualitative metrics, such as ease of use, implementation time, and readability, when conducting this study. Those metrics, by definition, are extremely difficult to measure.</li>
</ol>


<script type="text/javascript">
  google.load('visualization', '1', { packages:['corechart'] });
  google.setOnLoadCallback(drawCharts);

  var options = {
    hAxis: {
      title: 'Iterations'
    },
    vAxis: {
      title: 'Seconds'
    }
  }

  function drawCharts() {
    _drawCreatingInitialObjectChart();
    _drawFirstMethodCallChart();
    _drawSubsequentMethodCallsChart();
  }

  function _drawCreatingInitialObjectChart() {
    var data = google.visualization.arrayToDataTable([
      [ 'Iterations', 'Pure Hash', 'OpenStruct', 'Eager Loading', 'Method Missing', 'Lazy Loading' ],
      [          '0',    0.000007,     0.000002,        0.000002,         0.000003,       0.000002 ],
      [         '10',    0.000003,     0.001660,        0.000406,         0.000007,       0.000007 ],
      [        '100',    0.000008,     0.014470,        0.004800,         0.000029,       0.000029 ],
      [       '1000',    0.000052,     0.147943,        0.046868,         0.000269,       0.000535 ],
      [      '10000',    0.000514,     1.507701,        0.482254,         0.003883,       0.002656 ]
    ]);

    var chart = new google.visualization.LineChart(document.getElementById('chart_creating_initial_object'));
    chart.draw(data, options);
  }

  function _drawFirstMethodCallChart() {
    var data = google.visualization.arrayToDataTable([
      [ 'Iterations', 'Pure Hash', ' OpenStruct', 'Eager Loading', 'Method Missing', 'Lazy Loading' ],
      [          '0',    0.000008,      0.000002,        0.000003,         0.000002,       0.000002 ],
      [         '10',    0.000003,      0.001660,        0.000406,         0.000007,       0.000007 ],
      [        '100',    0.000236,      0.328859,        0.103952,         0.003961,       0.009337 ],
      [       '1000',    0.002248,      3.340419,        1.072228,         0.027261,       0.100895 ],
      [      '10000',    0.021093,     33.446652,       10.856142,         0.257472,       1.013682 ]
    ]);

    var chart = new google.visualization.LineChart(document.getElementById('chart_first_method_call'));
    chart.draw(data, options);
  }

  function _drawSubsequentMethodCallsChart() {
    var data = google.visualization.arrayToDataTable([
      [ 'Iterations', 'Pure Hash', ' OpenStruct', 'Eager Loading',  'Method Missing',  'Lazy Loading' ],
      [     '10,000',    0.021919,      0.078974,        0.084123,          0.186405,        0.072564 ],
      [    '100,000',    0.210670,      0.781603,        0.839965,          1.916927,        0.737112 ],
      [  '1,000,000',    2.155596,      7.977483,        8.513051,         19.288969,        7.400732 ],
      [ '10,000,000',   21.669286,     76.648551,       80.623932,        188.095461,       72.202056 ]
    ]);

    var chart = new google.visualization.LineChart(document.getElementById('subsequent_method_calls'));
    chart.draw(data, options);
  }
</script>

</div>


    <footer>
      <p class="meta">
        Posted in: 

<span class="categories">
  
    <a class='category' href='/blog/categories/benchmarking/'>benchmarking</a>, <a class='category' href='/blog/categories/eager-loading/'>eager loading</a>, <a class='category' href='/blog/categories/exploration/'>exploration</a>, <a class='category' href='/blog/categories/lazy-loading/'>lazy loading</a>, <a class='category' href='/blog/categories/method-missing/'>method_missing</a>, <a class='category' href='/blog/categories/openstruct/'>openstruct</a>, <a class='category' href='/blog/categories/optimization/'>optimization</a>, <a class='category' href='/blog/categories/profiling/'>profiling</a>
  
</span>


      </p>

      <p class="meta">
        
        <h2>About the Author - <a href="/blog/our-team/seth-vargo.html">Seth Vargo</a></h2>
        

<!-- <div>Posted by <a href="/blog/our-team/{"display_name"=>"Seth Vargo", "github"=>"sethvargo", "gravatar"=>"edba34509bbf91d0072c9c8a8f1886be", "twitter"=>"sethvargo", "bio"=>"Seth Vargo is the Web Operators intern for <a href=\"http://www.customink.com\">CustomInk</a>. Seth is currently an undergraduate <a href=\"http://is.hss.cmu.edu/\">Information Systems</a> major at <a href=\"http://cmu.edu\">Carnegie Mellon University</a>. Seth is an avid Ruby developer, <a href=\"http://github.com/sethvargo\">github</a> lover, <a href=\"http://twitter.com/sethvargo\">Twitter</a> fanatic, open-source proponent, <a href=\"http://dribbble.com\">dribbble</a> gawker, and run-on sentence creator. In his spare time, Seth enjoys food, soccer, xbox, and doing incredibly nerdy things with electronics (like <a href=\"http://www.arduino.cc/\">Arduino and <a href=\"http://www.raspberrypi.org/\">Raspberry Pi</a>). Seth really enjoys learning new things, especially when those things are incredibly nerdy or on the \"bleeding-edge\"."}.html">Seth Vargo</a></div> -->

<div id="author-top-links" style="margin:-10px 0 8px 0;">
  
    <iframe src="http://markdotto.github.com/github-buttons/github-btn.html?user=sethvargo&type=follow&count=true"
  allowtransparency="true" frameborder="0" scrolling="0" width="165px" height="20px"></iframe>
  

  
    <a href="https://twitter.com/sethvargo" class="twitter-follow-button" data-show-count="false">Follow @sethvargo</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
  
</div>

<img alt="Seth Vargo" src="http://gravatar.com/avatar/edba34509bbf91d0072c9c8a8f1886be?s=200" width="200" height="200" style="float:left; margin-right: 1.5em;" />

<div style="padding:0 0 10px 0;">
  Seth Vargo is the Web Operators intern for <a href="http://www.customink.com">CustomInk</a>. Seth is currently an undergraduate <a href="http://is.hss.cmu.edu/">Information Systems</a> major at <a href="http://cmu.edu">Carnegie Mellon University</a>. Seth is an avid Ruby developer, <a href="http://github.com/sethvargo">github</a> lover, <a href="http://twitter.com/sethvargo">Twitter</a> fanatic, open-source proponent, <a href="http://dribbble.com">dribbble</a> gawker, and run-on sentence creator. In his spare time, Seth enjoys food, soccer, xbox, and doing incredibly nerdy things with electronics (like <a href="http://www.arduino.cc/">Arduino and <a href="http://www.raspberrypi.org/">Raspberry Pi</a>). Seth really enjoys learning new things, especially when those things are incredibly nerdy or on the "bleeding-edge".
  <div style="clear:both;"></div>
</div>

      </p>
      <p class="meta">
        
          <a class="basic-alignment left" href="/blog/2012/06/15/welcome-jason-gilbertson/" title="Previous Post: Welcome Jason Gilbertson!">&laquo; Welcome Jason Gilbertson!</a>
        
        
          <a class="basic-alignment right" href="/blog/2012/06/27/welcome-dan-hensgen/" title="next Post: Welcome, Dan Hensgen">Welcome, Dan Hensgen &raquo;</a>
        
      </p>
    </footer>
  </article>
  
    <section>
      <h1>Comments</h1>
      <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
    </section>
  
</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/07/10/stay-cool/">Stay Cool</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/06/mvt-knife-test-and-travisci/">MVT: knife test and TravisCI</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/27/welcome-dan-hensgen/">Welcome, Dan Hensgen</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/18/profiling-openstruct-eager-loading-method-missing-and-lazy-loading/">Profiling OpenStruct, Eager Loading, Method Missing, and Lazy Loading</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/15/welcome-jason-gilbertson/">Welcome Jason Gilbertson!</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/customink">@customink</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'customink',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("CustomInkTech", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/CustomInkTech" class="twitter-follow-button" data-show-count="false">Follow @CustomInkTech</a>
  
</section>




<section>
  <h1>Top Categories</h1>
    <ul id="category-list"><li><a href='/blog/categories/devops'>devops (10)</a></li><li><a href='/blog/categories/web-operations'>web operations (8)</a></li><li><a href='/blog/categories/chef'>chef (8)</a></li><li><a href='/blog/categories/team'>team (6)</a></li><li><a href='/blog/categories/rails'>rails (6)</a></li><li><a href='/blog/categories/sysadmin'>sysadmin (6)</a></li><li><a href='/blog/categories/testing'>testing (5)</a></li><li><a href='/blog/categories/ruby'>ruby (4)</a></li><li><a href='/blog/categories/conference'>conference (4)</a></li><li><a href='/blog/categories/apache'>apache (3)</a></li></ul>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - CustomInk -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'custominktechnologyblog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://technology.customink.com/blog/2012/06/18/profiling-openstruct-eager-loading-method-missing-and-lazy-loading/';
        var disqus_url = 'http://technology.customink.com/blog/2012/06/18/profiling-openstruct-eager-loading-method-missing-and-lazy-loading/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
